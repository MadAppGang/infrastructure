# AWS SSO Setup Wizard - Flow Diagram

## High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       USER ENTRY POINTS                          â”‚
â”‚                                                                  â”‚
â”‚  1. Main Menu â†’ "AWS SSO Setup Wizard"                          â”‚
â”‚  2. Pre-flight Check â†’ Profile validation fails                 â”‚
â”‚  3. Environment Selector â†’ Missing profile detected             â”‚
â”‚  4. CLI Command â†’ ./meroku sso setup                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PROFILE INSPECTOR                              â”‚
â”‚                  (Detection Phase)                               â”‚
â”‚                                                                  â”‚
â”‚  â€¢ Parse ~/.aws/config file                                     â”‚
â”‚  â€¢ List existing SSO sessions                                   â”‚
â”‚  â€¢ List existing profiles                                       â”‚
â”‚  â€¢ Load project/*.yaml files                                    â”‚
â”‚  â€¢ Match profiles to environments                               â”‚
â”‚  â€¢ Identify missing/incomplete configurations                   â”‚
â”‚                                                                  â”‚
â”‚  Output: ProfileAnalysis map[env]â†’analysis                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DECISION TREE                                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ No SSO sessions exist?                    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚      â”‚ YES                            â”‚ NO                       â”‚
â”‚      â–¼                                â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Create SSO      â”‚      â”‚ Select/Reuse existing  â”‚          â”‚
â”‚  â”‚ Session Wizard  â”‚      â”‚ SSO session            â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                         â”‚                            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                         â”‚                                        â”‚
â”‚                         â–¼                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ For each environment:                     â”‚                  â”‚
â”‚  â”‚   - Missing profile?                      â”‚                  â”‚
â”‚  â”‚   - Incomplete profile?                   â”‚                  â”‚
â”‚  â”‚   - Valid profile?                        â”‚                  â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚      â”‚                                                           â”‚
â”‚      â–¼                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Build setup workflow:                     â”‚                  â”‚
â”‚  â”‚   â€¢ Collect missing fields                â”‚                  â”‚
â”‚  â”‚   â€¢ Pre-fill from YAML                    â”‚                  â”‚
â”‚  â”‚   â€¢ Apply defaults                        â”‚                  â”‚
â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              INTERACTIVE WIZARD (Bubble Tea TUI)                 â”‚
â”‚                                                                  â”‚
â”‚  FOR EACH ENVIRONMENT:                                          â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Step 1: Environment Overview                â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Environment: dev                             â”‚                â”‚
â”‚  â”‚ Detected:                                    â”‚                â”‚
â”‚  â”‚   âœ“ Region: us-east-1 (from dev.yaml)       â”‚                â”‚
â”‚  â”‚   âœ“ SSO Session: mycompany                  â”‚                â”‚
â”‚  â”‚ Missing:                                     â”‚                â”‚
â”‚  â”‚   âœ— Account ID                               â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ [Continue to setup]                          â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                    â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Step 2: Collect Missing Fields              â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ AWS Account ID: [____________]               â”‚                â”‚
â”‚  â”‚   (12-digit number)                          â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Role Name: [AdministratorAccess]             â”‚                â”‚
â”‚  â”‚   (Pre-filled with default)                  â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Default Region: [us-east-1]                  â”‚                â”‚
â”‚  â”‚   (Pre-filled from YAML)                     â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ [Continue] [Skip] [Cancel]                   â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                    â–¼                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Step 3: Confirmation                         â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Ready to configure profile 'dev':            â”‚                â”‚
â”‚  â”‚   â€¢ SSO Session: mycompany                   â”‚                â”‚
â”‚  â”‚   â€¢ Account ID: 123456789012                 â”‚                â”‚
â”‚  â”‚   â€¢ Role: AdministratorAccess                â”‚                â”‚
â”‚  â”‚   â€¢ Region: us-east-1                        â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Changes will be written to ~/.aws/config     â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ [Confirm] [Edit] [Cancel]                    â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONFIG WRITER                                 â”‚
â”‚                  (Write Phase)                                   â”‚
â”‚                                                                  â”‚
â”‚  Step 1: Backup existing config                                â”‚
â”‚    ~/.aws/config â†’ ~/.aws/config.backup_20251022_153045        â”‚
â”‚                                                                  â”‚
â”‚  Step 2: Write/Update SSO session (if new)                     â”‚
â”‚    [sso-session mycompany]                                      â”‚
â”‚    sso_start_url = https://mycompany.awsapps.com/start         â”‚
â”‚    sso_region = us-east-1                                       â”‚
â”‚    sso_registration_scopes = sso:account:access                 â”‚
â”‚                                                                  â”‚
â”‚  Step 3: Write/Update profile                                  â”‚
â”‚    [profile dev]                                                â”‚
â”‚    credential_process = aws configure export-credentials ...    â”‚
â”‚    sso_session = mycompany                                      â”‚
â”‚    sso_account_id = 123456789012                                â”‚
â”‚    sso_role_name = AdministratorAccess                          â”‚
â”‚    region = us-east-1                                           â”‚
â”‚                                                                  â”‚
â”‚  Step 4: Validate config syntax                                â”‚
â”‚    Parse ~/.aws/config to ensure valid INI format              â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Config written successfully                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AUTO-LOGIN & VALIDATION                        â”‚
â”‚                  (Authentication Phase)                          â”‚
â”‚                                                                  â”‚
â”‚  Step 1: Run SSO Login                                          â”‚
â”‚    Execute: aws sso login --profile dev                         â”‚
â”‚    â†’ Opens browser for user authentication                      â”‚
â”‚    â†’ User logs in via AWS SSO portal                            â”‚
â”‚    â†’ Token saved to ~/.aws/sso/cache/                           â”‚
â”‚                                                                  â”‚
â”‚  Step 2: Wait for completion                                    â”‚
â”‚    Monitor command exit status                                  â”‚
â”‚                                                                  â”‚
â”‚  Step 3: Validate credentials                                   â”‚
â”‚    Call: STS.GetCallerIdentity()                                â”‚
â”‚    Response:                                                     â”‚
â”‚      â€¢ Account: 123456789012                                    â”‚
â”‚      â€¢ Arn: arn:aws:sts::123456789012:assumed-role/...         â”‚
â”‚      â€¢ UserId: AROAEXAMPLE:user@example.com                     â”‚
â”‚                                                                  â”‚
â”‚  Step 4: Update YAML file                                       â”‚
â”‚    project/dev.yaml:                                            â”‚
â”‚      account_id: "123456789012"                                 â”‚
â”‚      aws_profile: "dev"                                         â”‚
â”‚                                                                  â”‚
â”‚  Step 5: Set environment variable                               â”‚
â”‚    export AWS_PROFILE=dev                                       â”‚
â”‚                                                                  â”‚
â”‚  âœ“ Profile 'dev' is ready!                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUCCESS SUMMARY                               â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ âœ“ AWS SSO Setup Complete!                  â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ Configured profiles:                         â”‚                â”‚
â”‚  â”‚   â€¢ dev (Account: 123456789012)             â”‚                â”‚
â”‚  â”‚   â€¢ staging (Account: 987654321098)         â”‚                â”‚
â”‚  â”‚   â€¢ prod (Account: 456789012345)            â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ SSO Session: mycompany                       â”‚                â”‚
â”‚  â”‚ YAML files updated with account IDs          â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ You're ready to deploy!                      â”‚                â”‚
â”‚  â”‚                                              â”‚                â”‚
â”‚  â”‚ [Continue to deployment] [Exit]              â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Detailed Flow: Brand New User

```
START: ./meroku
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Main Menu                        â”‚
â”‚ > AWS SSO Setup Wizard           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Inspector detects:               â”‚
â”‚ â€¢ No ~/.aws/config exists        â”‚
â”‚ â€¢ 3 YAML files: dev, staging,    â”‚
â”‚   prod                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Welcome Screen                                   â”‚
â”‚                                                  â”‚
â”‚ No AWS configuration found!                      â”‚
â”‚                                                  â”‚
â”‚ I'll help you set up AWS SSO for:               â”‚
â”‚   â€¢ dev (us-east-1)                              â”‚
â”‚   â€¢ staging (us-west-2)                          â”‚
â”‚   â€¢ prod (us-east-1)                             â”‚
â”‚                                                  â”‚
â”‚ This will take about 2 minutes.                  â”‚
â”‚                                                  â”‚
â”‚ [Get Started]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SSO Session Setup                                â”‚
â”‚                                                  â”‚
â”‚ First, let's configure your SSO session.         â”‚
â”‚                                                  â”‚
â”‚ SSO Start URL:                                   â”‚
â”‚ [https://mycompany.awsapps.com/start]            â”‚
â”‚                                                  â”‚
â”‚ SSO Region: [us-east-1 â–¼]                        â”‚
â”‚   (Type to search)                               â”‚
â”‚                                                  â”‚
â”‚ Session Name: [mycompany]                        â”‚
â”‚                                                  â”‚
â”‚ Need help? View AWS SSO documentation           â”‚
â”‚                                                  â”‚
â”‚ [Continue]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment: dev (1/3)                           â”‚
â”‚                                                  â”‚
â”‚ â„¹ From dev.yaml:                                 â”‚
â”‚   â€¢ Region: us-east-1                            â”‚
â”‚   â€¢ Environment: dev                             â”‚
â”‚                                                  â”‚
â”‚ â“ What's your AWS Account ID for dev?           â”‚
â”‚ [123456789012]                                   â”‚
â”‚                                                  â”‚
â”‚ Role Name: [AdministratorAccess]                 â”‚
â”‚   (Most common role)                             â”‚
â”‚                                                  â”‚
â”‚ Region: [us-east-1]                              â”‚
â”‚   (From YAML)                                    â”‚
â”‚                                                  â”‚
â”‚ [Continue] [Skip Environment]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Writing Configuration...                         â”‚
â”‚                                                  â”‚
â”‚ âœ“ Backup created                                 â”‚
â”‚ âœ“ SSO session 'mycompany' written               â”‚
â”‚ âœ“ Profile 'dev' written                          â”‚
â”‚ âœ“ Config validated                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SSO Login Required                               â”‚
â”‚                                                  â”‚
â”‚ Opening browser for AWS SSO authentication...    â”‚
â”‚                                                  â”‚
â”‚ Your browser should open automatically.          â”‚
â”‚ If not, visit:                                   â”‚
â”‚ https://mycompany.awsapps.com/start              â”‚
â”‚                                                  â”‚
â”‚ [Waiting for authentication...]                  â”‚
â”‚                                                  â”‚
â”‚ Press Ctrl+C to cancel                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Authentication Successful!                     â”‚
â”‚                                                  â”‚
â”‚ Testing credentials...                           â”‚
â”‚                                                  â”‚
â”‚ âœ“ Account verified: 123456789012                â”‚
â”‚ âœ“ User: arn:aws:sts::123456789012:assumed-ro... â”‚
â”‚ âœ“ dev.yaml updated                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment: staging (2/3)                       â”‚
â”‚                                                  â”‚
â”‚ â„¹ From staging.yaml:                             â”‚
â”‚   â€¢ Region: us-west-2                            â”‚
â”‚                                                  â”‚
â”‚ â„¹ SSO Session: Using 'mycompany' (already auth) â”‚
â”‚                                                  â”‚
â”‚ AWS Account ID: [987654321098]                   â”‚
â”‚ Role Name: [AdministratorAccess]                 â”‚
â”‚ Region: [us-west-2]                              â”‚
â”‚                                                  â”‚
â”‚ [Continue] [Skip]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Writing Configuration...                         â”‚
â”‚                                                  â”‚
â”‚ âœ“ Profile 'staging' written                      â”‚
â”‚ âœ“ Already authenticated (reusing session)        â”‚
â”‚ âœ“ staging.yaml updated                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Environment: prod (3/3)                          â”‚
â”‚                                                  â”‚
â”‚ â„¹ From prod.yaml:                                â”‚
â”‚   â€¢ Region: us-east-1                            â”‚
â”‚                                                  â”‚
â”‚ AWS Account ID: [456789012345]                   â”‚
â”‚ Role Name: [AdministratorAccess]                 â”‚
â”‚ Region: [us-east-1]                              â”‚
â”‚                                                  â”‚
â”‚ [Continue] [Skip]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Writing Configuration...                         â”‚
â”‚                                                  â”‚
â”‚ âœ“ Profile 'prod' written                         â”‚
â”‚ âœ“ Already authenticated (reusing session)        â”‚
â”‚ âœ“ prod.yaml updated                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ“ Setup Complete!                                â”‚
â”‚                                                  â”‚
â”‚ Summary:                                         â”‚
â”‚ â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”             â”‚
â”‚ SSO Session:  mycompany                          â”‚
â”‚ Profiles:     3 configured                       â”‚
â”‚                                                  â”‚
â”‚ â€¢ dev        (123456789012 / us-east-1)         â”‚
â”‚ â€¢ staging    (987654321098 / us-west-2)         â”‚
â”‚ â€¢ prod       (456789012345 / us-east-1)         â”‚
â”‚                                                  â”‚
â”‚ Files Updated:                                   â”‚
â”‚ â€¢ ~/.aws/config                                  â”‚
â”‚ â€¢ project/dev.yaml                               â”‚
â”‚ â€¢ project/staging.yaml                           â”‚
â”‚ â€¢ project/prod.yaml                              â”‚
â”‚                                                  â”‚
â”‚ ğŸš€ You're ready to deploy!                       â”‚
â”‚                                                  â”‚
â”‚ [Deploy Now] [Back to Menu]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Error Recovery Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SSO Login Failed                                 â”‚
â”‚                                                  â”‚
â”‚ âŒ Error: User cancelled authentication          â”‚
â”‚                                                  â”‚
â”‚ Profile 'dev' was created but not authenticated. â”‚
â”‚                                                  â”‚
â”‚ What would you like to do?                       â”‚
â”‚   â€¢ Retry SSO login now                          â”‚
â”‚   â€¢ Skip authentication (login later manually)   â”‚
â”‚   â€¢ Cancel setup                                 â”‚
â”‚                                                  â”‚
â”‚ Manual login command:                            â”‚
â”‚   aws sso login --profile dev                    â”‚
â”‚                                                  â”‚
â”‚ [Retry] [Skip] [Cancel]                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ (if Retry)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Retrying SSO Login...                            â”‚
â”‚                                                  â”‚
â”‚ Opening browser again...                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validation Failed                                â”‚
â”‚                                                  â”‚
â”‚ âŒ Failed to verify credentials for 'dev'        â”‚
â”‚                                                  â”‚
â”‚ Error: AccessDenied: User is not authorized     â”‚
â”‚        to perform: sts:GetCallerIdentity         â”‚
â”‚                                                  â”‚
â”‚ ğŸ”§ Troubleshooting:                              â”‚
â”‚   1. Verify account ID is correct                â”‚
â”‚   2. Check role name matches IAM                 â”‚
â”‚   3. Confirm role is assigned to your user       â”‚
â”‚   4. Try re-authenticating                       â”‚
â”‚                                                  â”‚
â”‚ What would you like to do?                       â”‚
â”‚   â€¢ Re-enter account details                     â”‚
â”‚   â€¢ Retry validation                             â”‚
â”‚   â€¢ Skip validation (deploy may fail)            â”‚
â”‚   â€¢ View full error details                      â”‚
â”‚                                                  â”‚
â”‚ [Re-enter] [Retry] [Skip] [Details]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Integration Points

### 1. From Main Menu

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Meroku Infrastructure Manager                   â”‚
â”‚                                                  â”‚
â”‚ > Deploy Infrastructure                          â”‚
â”‚   Plan Infrastructure Changes                    â”‚
â”‚   âš™ï¸  AWS SSO Setup Wizard â† NEW                 â”‚
â”‚   ğŸ” Select AWS Profile                          â”‚
â”‚   ğŸŒ DNS Setup                                   â”‚
â”‚   ğŸ¤– AI Agent - Troubleshoot Issues              â”‚
â”‚   ğŸ“Š View Infrastructure State                   â”‚
â”‚   ğŸ—‘ï¸  Destroy Infrastructure                     â”‚
â”‚   Exit                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. From Pre-Flight Check

```
ğŸš€ Starting deployment for environment: dev

ğŸ” Running AWS pre-flight checks...
âŒ AWS_PROFILE not set

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AWS Profile Not Configured                       â”‚
â”‚                                                  â”‚
â”‚ No AWS profile found for environment 'dev'.      â”‚
â”‚                                                  â”‚
â”‚ Would you like to set up AWS SSO now?            â”‚
â”‚                                                  â”‚
â”‚ [Yes, set up now] [No, set manually]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ (if Yes)
    [Launch wizard for 'dev' environment only]
```

### 3. From Environment Selector

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Environment                               â”‚
â”‚                                                  â”‚
â”‚ âš ï¸  Some environments need AWS setup:            â”‚
â”‚   â€¢ staging (no profile configured)              â”‚
â”‚   â€¢ prod (no profile configured)                 â”‚
â”‚                                                  â”‚
â”‚ Would you like to set them up now?               â”‚
â”‚                                                  â”‚
â”‚ [Set up now] [Continue anyway]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼ (if Set up now)
    [Launch wizard for staging & prod only]
```

## State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   INITIAL    â”‚
â”‚ (No config)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ INSPECTING   â”‚â”€â”€â”€â”€â–¶â”‚  DETECTED    â”‚
â”‚ (Analyzing)  â”‚     â”‚ (Config found)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                            â”‚
       â–¼                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PROMPTING  â”‚                            â”‚   COMPLETE   â”‚
â”‚(Collecting   â”‚                            â”‚(No action    â”‚
â”‚ user input)  â”‚                            â”‚  needed)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   WRITING    â”‚
â”‚(Updating     â”‚
â”‚ config file) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AUTHENTICATINGâ”‚â”€â”€â”€â”€â–¶â”‚   FAILED     â”‚
â”‚(SSO login)   â”‚     â”‚(Retry/Cancel)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚                     â”‚
       â–¼                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  VALIDATING  â”‚            â”‚
â”‚(Testing      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ credentials) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UPDATING    â”‚
â”‚(Saving to    â”‚
â”‚  YAML files) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SUCCESS    â”‚
â”‚(Ready to     â”‚
â”‚  deploy)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure

```
infrastructure/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ aws_sso_profile_inspector.go      â† NEW: Profile analysis
â”‚   â”œâ”€â”€ aws_sso_setup_wizard_tui.go       â† NEW: Bubble Tea wizard
â”‚   â”œâ”€â”€ aws_config_writer.go              â† NEW: Config file writer
â”‚   â”œâ”€â”€ aws_sso_auto_login.go             â† NEW: Login automation
â”‚   â”œâ”€â”€ aws_selector.go                   â† ENHANCE: Use wizard
â”‚   â”œâ”€â”€ aws_preflight.go                  â† ENHANCE: Trigger wizard
â”‚   â”œâ”€â”€ main.go                           â† ENHANCE: Add menu option
â”‚   â””â”€â”€ env_selector.go                   â† ENHANCE: Detect missing
â”‚
â”œâ”€â”€ ai_docs/
â”‚   â”œâ”€â”€ AWS_SSO_SETUP_WIZARD.md           â† Implementation plan
â”‚   â”œâ”€â”€ AWS_SSO_WIZARD_FLOW_DIAGRAM.md    â† This file
â”‚   â””â”€â”€ AWS_SSO_SETUP_USER_GUIDE.md       â† TODO: User docs
â”‚
â””â”€â”€ CLAUDE.md                              â† TODO: Update
```

## Summary

This wizard transforms AWS SSO setup from a **frustrating manual process** requiring documentation lookup and file editing into a **guided, intelligent experience** that:

1. **Detects** what you have
2. **Asks** only for what's missing
3. **Fixes** everything automatically
4. **Validates** it all works
5. **Updates** your project config

Zero manual file editing. Zero googling for AWS SSO docs. Just answer a few questions and you're ready to deploy.
